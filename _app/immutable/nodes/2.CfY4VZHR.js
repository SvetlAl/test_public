import"../chunks/Bzak7iHL.js";import{a2 as Pe,E as Ae,aS as Ce,aT as De,N as He,y as Me,aU as Ue,aV as Ee,P as Le,Y as K,aC as de,p as se,f as $e,t as Q,a as E,b as oe,d as b,c as L,r as k,s as p,V as Oe,Q as o,T as R,B as le,R as H,U as ce}from"../chunks/DTIdTzvd.js";import{s as Ie}from"../chunks/CcO820JS.js";import{i as Y,b as _e}from"../chunks/BxMfAwgx.js";import{w as ve}from"../chunks/C61nHo9L.js";import{p as z}from"../chunks/Cr5olWAc.js";import{g as A,a as Re}from"../chunks/BlBmHihH.js";import{c as fe,o as pe}from"../chunks/IDowCG3Z.js";import{a as Ve,d as he,s as I}from"../chunks/DCRR-Bcp.js";import{g as W,s as ae}from"../chunks/B85A_8ID.js";import{p as M}from"../chunks/CBwARAgb.js";import{s as je}from"../chunks/Bcmr2R1a.js";import{s as ze}from"../chunks/Bt2RY-B_.js";import{s as qe}from"../chunks/CcyzltFj.js";import{s as We}from"../chunks/fxlyONI_.js";import{s as Ke}from"../chunks/DZ0mv3q-.js";import{s as Qe}from"../chunks/DCWnEj1q.js";import{s as Ye}from"../chunks/DLAOAiV5.js";const Je=()=>performance.now(),V={tick:t=>requestAnimationFrame(t),now:()=>Je(),tasks:new Set};function me(){const t=V.now();V.tasks.forEach(e=>{e.c(t)||(V.tasks.delete(e),e.f())}),V.tasks.size!==0&&V.tick(me)}function Xe(t){let e;return V.tasks.size===0&&V.tick(me),{promise:new Promise(n=>{V.tasks.add(e={c:t,f:n})}),abort(){V.tasks.delete(e)}}}function ne(t,e){de(()=>{t.dispatchEvent(new CustomEvent(e))})}function Ze(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function ue(t){const e={},n=t.split(";");for(const a of n){const[g,r]=a.split(":");if(!g||r===void 0)break;const i=Ze(g.trim());e[i]=r.trim()}return e}const et=t=>t;function ge(t,e,n,a){var w;var g=(t&Ue)!==0,r="both",i,x=e.inert,_=e.style.overflow,l,v;function G(){return de(()=>i??(i=n()(e,(a==null?void 0:a())??{},{direction:r})))}var S={is_global:g,in(){e.inert=x,l=ie(e,G(),v,1,()=>{ne(e,"introend"),l==null||l.abort(),l=i=void 0,e.style.overflow=_})},out(d){e.inert=!0,v=ie(e,G(),l,0,()=>{ne(e,"outroend"),d==null||d()})},stop:()=>{l==null||l.abort(),v==null||v.abort()}},B=Pe;if(((w=B.nodes).t??(w.t=[])).push(S),Ve){var T=g;if(!T){for(var u=B.parent;u&&(u.f&Ae)!==0;)for(;(u=u.parent)&&(u.f&Ce)===0;);T=!u||(u.f&De)!==0}T&&He(()=>{Me(()=>S.in())})}}function ie(t,e,n,a,g){var r=a===1;if(Ee(e)){var i,x=!1;return Le(()=>{if(!x){var w=e({direction:r?"in":"out"});i=ie(t,w,n,a,g)}}),{abort:()=>{x=!0,i==null||i.abort()},deactivate:()=>i.deactivate(),reset:()=>i.reset(),t:()=>i.t()}}if(n==null||n.deactivate(),!(e!=null&&e.duration)&&!(e!=null&&e.delay))return ne(t,r?"introstart":"outrostart"),g(),{abort:K,deactivate:K,reset:K,t:()=>a};const{delay:_=0,css:l,tick:v,easing:G=et}=e;var S=[];if(r&&n===void 0&&(v&&v(0,1),l)){var B=ue(l(0,1));S.push(B,B)}var T=()=>1-a,u=t.animate(S,{duration:_,fill:"forwards"});return u.onfinish=()=>{u.cancel(),ne(t,r?"introstart":"outrostart");var w=(n==null?void 0:n.t())??1-a;n==null||n.abort();var d=a-w,F=e.duration*Math.abs(d),$=[];if(F>0){var C=!1;if(l)for(var O=Math.ceil(F/16.666666666666668),P=0;P<=O;P+=1){var U=w+d*G(P/O),j=ue(l(U,1-U));$.push(j),C||(C=j.overflow==="hidden")}C&&(t.style.overflow="hidden"),T=()=>{var D=u.currentTime;return w+d*G(D/F)},v&&Xe(()=>{if(u.playState!=="running")return!1;var D=T();return v(D,1-D),!0})}u=t.animate($,{duration:F,fill:"forwards"}),u.onfinish=()=>{T=()=>a,v==null||v(a,1-a),g()}},{abort:()=>{u&&(u.cancel(),u.effect=null,u.onfinish=K)},deactivate:()=>{g=K},reset:()=>{a===0&&(v==null||v(1,0))},t:()=>T()}}const tt=t=>t;function at(t){const e=t-1;return e*e*e+1}function nt(t,{delay:e=0,duration:n=400,easing:a=tt}={}){const g=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:a,css:r=>`opacity: ${r*g}`}}function rt(t,{delay:e=0,duration:n=400,easing:a=at,axis:g="y"}={}){const r=getComputedStyle(t),i=+r.opacity,x=g==="y"?"height":"width",_=parseFloat(r[x]),l=g==="y"?["top","bottom"]:["left","right"],v=l.map(d=>`${d[0].toUpperCase()}${d.slice(1)}`),G=parseFloat(r[`padding${v[0]}`]),S=parseFloat(r[`padding${v[1]}`]),B=parseFloat(r[`margin${v[0]}`]),T=parseFloat(r[`margin${v[1]}`]),u=parseFloat(r[`border${v[0]}Width`]),w=parseFloat(r[`border${v[1]}Width`]);return{delay:e,duration:n,easing:a,css:d=>`overflow: hidden;opacity: ${Math.min(d*20,1)*i};${x}: ${d*_}px;padding-${l[0]}: ${d*G}px;padding-${l[1]}: ${d*S}px;margin-${l[0]}: ${d*B}px;margin-${l[1]}: ${d*T}px;border-${l[0]}-width: ${d*u}px;border-${l[1]}-width: ${d*w}px;min-${x}: 0`}}function it(t){return--t*t*t*t*t+1}const st=()=>"Main",ot=()=>"Главная",lt=((t={},e={})=>(e.locale??W())==="en"?st():ot()),ct=()=>"Modes",vt=()=>"Режимы",ut=((t={},e={})=>(e.locale??W())==="en"?ct():vt()),gt=()=>"Vehicle model",dt=()=>"Модель Авто",_t=((t={},e={})=>(e.locale??W())==="en"?gt():dt()),ft=()=>"Speedometer",pt=()=>"Спидометр",ht=((t={},e={})=>(e.locale??W())==="en"?ft():pt()),mt=()=>"Odometer",bt=()=>"Одометр",kt=((t={},e={})=>(e.locale??W())==="en"?mt():bt()),wt=()=>"Cruise control",Tt=()=>"Круиз-контроль",yt=((t={},e={})=>(e.locale??W())==="en"?wt():Tt()),xt=()=>"TPMS",Ft=()=>"Давление шин",Nt=((t={},e={})=>(e.locale??W())==="en"?xt():Ft());var Gt=L('<img src="/engineer/navi_back.png" alt="Back" width="28" height="28" class="svelte-1n6kk7i"/>'),St=L('<img src="/engineer/navi_hamburger.png" alt="Menu" width="28" height="28" class="svelte-1n6kk7i"/>'),Bt=L('<div class="drawer-overlay svelte-1n6kk7i"><div class="drawer svelte-1n6kk7i"><div class="drawer-top-border svelte-1n6kk7i"></div> <div class="drawer-header svelte-1n6kk7i"><h2 class="svelte-1n6kk7i">Menu</h2></div> <nav class="drawer-nav svelte-1n6kk7i"><button class="drawer-btn svelte-1n6kk7i"><img src="/engineer/drawer/DrawerItem_Settings.png" alt="Settings" class="svelte-1n6kk7i"/> </button> <button class="drawer-btn svelte-1n6kk7i"><img src="/engineer/drawer/DrawerItem_UserProfile.png" alt="UserProfile" class="svelte-1n6kk7i"/> </button> <button class="drawer-btn svelte-1n6kk7i"><img src="/engineer/drawer/DrawerItem_View.png" alt="View" class="svelte-1n6kk7i"/> </button> <button class="drawer-btn svelte-1n6kk7i"><img src="/engineer/drawer/DrawerItem_Language.png" alt="Language" class="svelte-1n6kk7i"/> </button> <button class="drawer-btn svelte-1n6kk7i"><img src="/engineer/drawer/DrawerItem_Debug.png" alt="Debug" class="svelte-1n6kk7i"/> </button> <button class="drawer-btn svelte-1n6kk7i"><img src="/engineer/drawer/DrawerItem_Help.png" alt="Help" class="svelte-1n6kk7i"/> </button> <button class="drawer-btn svelte-1n6kk7i"><img src="/engineer/drawer/DrawerItem_About.png" alt="About" class="svelte-1n6kk7i"/> </button></nav></div></div>'),Pt=L('<div class="toolbar svelte-1n6kk7i" data-tauri-drag-region=""><div class="toolbar-content svelte-1n6kk7i"><button class="menu-btn svelte-1n6kk7i"><!></button> <div class="title svelte-1n6kk7i"> </div> <div style="margin-left: auto;"></div></div></div> <!>',1);function At(t,e){se(e,!0);const n=fe();let a,g=M(e,"drawerOpen",3,!1),r=M(e,"inSettings",3,!1),i=M(e,"onToggle",3,()=>{}),x=M(e,"onGoToSettings",3,()=>{}),_=M(e,"onGoToUserProfile",3,()=>{}),l=M(e,"onGoToView",3,()=>{}),v=M(e,"onGoToLanguage",3,()=>{}),G=M(e,"onGoToDebug",3,()=>{}),S=M(e,"onGoToHelp",3,()=>{}),B=M(e,"onGoToAbout",3,()=>{});M(e,"onGoBack",3,()=>{});function T(){if(!a)return;const f=a.offsetHeight||a.getBoundingClientRect().height||0;f>0&&(n("heightchange",{height:f}),console.log("[Toolbar] dispatched height:",f))}pe(()=>{if(!a)return;T(),[50,150,300,500].forEach(y=>setTimeout(T,y));const c=new ResizeObserver(T);return c.observe(a),()=>{c.disconnect()}});var u=Pt(),w=$e(u),d=b(w),F=b(d);F.__click=function(...f){var c;(c=i())==null||c.apply(this,f)};var $=b(F);{var C=f=>{var c=Gt();E(f,c)},O=f=>{var c=St();E(f,c)};Y($,f=>{r()||g()?f(C):f(O,!1)})}k(F);var P=p(F,2),U=b(P,!0);k(P),Oe(2),k(d),k(w),_e(w,f=>a=f,()=>a);var j=p(w,2);{var D=f=>{var c=Bt(),y=b(c),s=p(b(y),4),h=b(s);h.__click=function(...N){var m;(m=x())==null||m.apply(this,N)};var q=p(b(h));k(h);var J=p(h,2);J.__click=function(...N){var m;(m=_())==null||m.apply(this,N)};var be=p(b(J));k(J);var X=p(J,2);X.__click=function(...N){var m;(m=l())==null||m.apply(this,N)};var ke=p(b(X));k(X);var Z=p(X,2);Z.__click=function(...N){var m;(m=v())==null||m.apply(this,N)};var we=p(b(Z));k(Z);var ee=p(Z,2);ee.__click=function(...N){var m;(m=G())==null||m.apply(this,N)};var Te=p(b(ee));k(ee);var te=p(ee,2);te.__click=function(...N){var m;(m=S())==null||m.apply(this,N)};var ye=p(b(te));k(te);var re=p(te,2);re.__click=function(...N){var m;(m=B())==null||m.apply(this,N)};var xe=p(b(re));k(re),k(s),k(y),k(c),Q((N,m,Fe,Ne,Ge,Se,Be)=>{I(q,` ${N??""}`),I(be,` ${m??""}`),I(ke,` ${Fe??""}`),I(we,` ${Ne??""}`),I(Te,` ${Ge??""}`),I(ye,` ${Se??""}`),I(xe,` ${Be??""}`)},[()=>je(),()=>ze(),()=>qe(),()=>We(),()=>Ke(),()=>Qe(),()=>Ye()]),ge(3,y,()=>rt,()=>({duration:300,easing:it,axis:"x"})),ge(3,c,()=>nt,()=>({duration:200})),E(f,c)};Y(j,f=>{g()&&f(D)})}Q(()=>{ae(F,"aria-label",r()||g()?"Back":"Menu"),I(U,r()||g()?"Назад":"Меню")}),E(t,u),oe()}he(["click"]);var Ct=L('<div class="nav-icon unavailable svelte-gkppuw"><img src="/engineer/Navi/Unavailable.png" alt="Unavailable" class="svelte-gkppuw"/></div>'),Dt=L('<div class="nav-icon prev svelte-gkppuw"><img alt="Previous" class="svelte-gkppuw"/></div>'),Ht=L('<div class="nav-icon unavailable svelte-gkppuw"><img src="/engineer/Navi/Unavailable.png" alt="Unavailable" class="svelte-gkppuw"/></div>'),Mt=L('<div class="nav-icon next svelte-gkppuw"><img alt="Next" class="svelte-gkppuw"/></div>'),Ut=L('<div class="bottom-container svelte-gkppuw" data-tauri-drag-region=""><div class="header-title svelte-gkppuw"> </div> <div class="bottom-frame svelte-gkppuw"><button class="nav-arrow left svelte-gkppuw"><img src="/engineer/Navi/navi_aleft.png" alt="Prev" class="svelte-gkppuw"/></button> <!> <div class="nav-icon current svelte-gkppuw"><img alt="Current" class="svelte-gkppuw"/></div> <!> <button class="nav-arrow right svelte-gkppuw"><img src="/engineer/Navi/navi_aright.png" alt="Next" class="svelte-gkppuw"/></button></div></div>');function Et(t,e){se(e,!0);const n=fe();let a;function g(){if(!a)return;const s=a.offsetHeight||a.getBoundingClientRect().height||0;s>0&&(n("heightchange",{height:s}),console.log("[Navibar] dispatched height:",s))}pe(()=>{if(!a)return;g(),[50,150,300,500].forEach(q=>setTimeout(g,q));const h=new ResizeObserver(g);return h.observe(a),()=>{h.disconnect()}});const r=[{path:"/engineer/base/main",labelFn:()=>lt(),icon:"/engineer/Navi/Base_Main.png"},{path:"/engineer/base/device_modes",labelFn:()=>ut(),icon:"/engineer/Navi/Base_Device_Modes.png"},{path:"/engineer/base/select_model",labelFn:()=>_t(),icon:"/engineer/Navi/Base_SelectModel.png"},{path:"/engineer/base/cal_speedometer",labelFn:()=>ht(),icon:"/engineer/Navi/Base_AdjustSpeedMlt.png"},{path:"/engineer/base/cal_odometer",labelFn:()=>kt(),icon:"/engineer/Navi/Base_AdjustOdoMlt.png"},{path:"/engineer/base/cal_crs",labelFn:()=>yt(),icon:"/engineer/Navi/Base_AdjustCruiseMlt.png"},{path:"/engineer/base/cal_tyres",labelFn:()=>Nt(),icon:"/engineer/Navi/Base_AdjustTyresThreshold.png"}];let i=R(()=>r.findIndex(s=>s.path===z.url.pathname)),x=R(()=>o(i)===0),_=R(()=>o(i)===r.length-1),l=R(()=>{var s;return o(x)?null:((s=r[o(i)-1])==null?void 0:s.path)??null}),v=R(()=>{var s;return o(_)?null:((s=r[o(i)+1])==null?void 0:s.path)??null}),G=R(()=>o(i)>=0&&o(i)<r.length?r[o(i)].labelFn():"Undefined page"),S=R(()=>{var s,h;return{path:((s=r[o(i)])==null?void 0:s.path)??r[0].path,label:o(G),icon:((h=r[o(i)])==null?void 0:h.icon)??r[0].icon}});function B(){o(l)&&A(o(l))}function T(){o(v)&&A(o(v))}var u=Ut(),w=b(u),d=b(w,!0);k(w);var F=p(w,2),$=b(F);$.__click=B;var C=p($,2);{var O=s=>{var h=Ct();E(s,h)},P=s=>{var h=Dt(),q=b(h);k(h),Q(()=>ae(q,"src",r[o(i)-1].icon)),E(s,h)};Y(C,s=>{o(x)?s(O):s(P,!1)})}var U=p(C,2),j=b(U);k(U);var D=p(U,2);{var f=s=>{var h=Ht();E(s,h)},c=s=>{var h=Mt(),q=b(h);k(h),Q(()=>ae(q,"src",r[o(i)+1].icon)),E(s,h)};Y(D,s=>{o(_)?s(f):s(c,!1)})}var y=p(D,2);y.__click=T,k(F),k(u),_e(u,s=>a=s,()=>a),Q(()=>{I(d,o(S).label),ae(j,"src",o(S).icon)}),E(t,u),oe()}he(["click"]);var Lt=L('<div class="app-layout svelte-147fml1"><!> <main class="page-content svelte-147fml1"><!></main> <!></div>');function na(t,e){se(e,!0);const n=ve(0),a=ve(0);le("toolbarHeight",n),le("navibarHeight",a);function g(c){const y=c.detail.height;console.log("[Layout] Toolbar height received:",y),y>0&&n.set(y)}function r(c){const y=c.detail.height;console.log("[Layout] Navibar height received:",y),y>0&&a.set(y)}let i=R(()=>z.url.pathname==="/engineer/settings/settings"||z.url.pathname==="/engineer/settings/user_profile"||z.url.pathname==="/engineer/settings/view"||z.url.pathname==="/engineer/settings/language"||z.url.pathname==="/engineer/settings/debug"||z.url.pathname==="/engineer/settings/help"||z.url.pathname==="/engineer/settings/about");const x=R(()=>o(i));let _=ce(!1),l=ce("/engineer/base/main");Re(({from:c})=>{var y;(y=c==null?void 0:c.url)!=null&&y.pathname&&!o(i)&&c.url.pathname!=="/engineer/settings/language"&&H(l,c.url.pathname,!0),H(_,!1)});function v(){o(i)||o(_)?(H(_,!1),o(i)&&G()):H(_,!0)}function G(){o(l)==="/engineer/settings/language"?A("/engineer/base/main"):o(l)&&o(l)!=="/"?A(o(l)):A("/engineer/base/main")}function S(){H(_,!1),A("/engineer/settings/settings")}function B(){H(_,!1),A("/engineer/settings/user_profile")}function T(){H(_,!1),A("/engineer/settings/view")}function u(){H(_,!1),A("/engineer/settings/language")}function w(){H(_,!1),A("/engineer/settings/debug")}function d(){H(_,!1),A("/engineer/settings/help")}function F(){H(_,!1),A("/engineer/settings/about")}var $={toolbarHeight:n,navibarHeight:a},C=Lt(),O=b(C);At(O,{get drawerOpen(){return o(_)},get inSettings(){return o(i)},onToggle:v,onGoToSettings:S,onGoToUserProfile:B,onGoToView:T,onGoToLanguage:u,onGoToDebug:w,onGoToHelp:d,onGoToAbout:F,onGoBack:G,$$events:{heightchange:g}});var P=p(O,2),U=b(P);Ie(U,()=>e.children),k(P);var j=p(P,2);{var D=c=>{Et(c,{$$events:{heightchange:r}})},f=c=>{};Y(j,c=>{o(x)?c(f,!1):c(D)})}return k(C),E(t,C),oe($)}export{na as component};
